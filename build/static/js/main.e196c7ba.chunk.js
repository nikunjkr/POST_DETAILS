(this.webpackJsonpforum=this.webpackJsonpforum||[]).push([[0],{118:function(e,t,n){},122:function(e,t,n){"use strict";n.r(t);var o=n(0),c=n(9),a=n.n(c),r=(n(91),n(92),n(35)),i=n.n(r),s=n(166),l=n(11),d=n.n(l),u=n(18),p=n(69),m=n.n(p).a.create({baseURL:"https://ec2-52-206-109-241.compute-1.amazonaws.com/team2practo"});m.interceptors.request.use((function(e){return e.headers.Authorization=i.a.get("access_control_token_cookie_skinder"),e}));var v=function(e,t){return m.put("/comments/uord",{comment_id:e,upordown:t})},j=function(e,t){return m.post("/comments",{post_id:e,comment:t})},f=function(e){return m.get("/comments/".concat(e,"/thread"))},h=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){var o,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a=e,m.get("/".concat(a,"/comments"));case 3:o=t.sent,c=o.data,console.log("call",c),n({type:"GET_POST_COMMENTS",payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}var a}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e,t){return function(){var n=Object(u.a)(d.a.mark((function n(o){var c,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,j(e,t);case 3:c=n.sent,a=c.data,console.log(a,"secret"),o({type:"CREATE_COMMENT",payload:a}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},x=function(e,t){return function(){var n=Object(u.a)(d.a.mark((function n(o){var c,a;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,v(e,t);case 3:c=n.sent,a=c.data,console.log(a),o({type:"UPVOTE_COMMENT",payload:a}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("error in upvote comments");case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){var o,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e);case 3:o=t.sent,c=o.data,console.log("thread data",c),n({type:"GET_THREAD",payload:c}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},g=n(13),_=n(164),y=n(159),w=n(49),k=n(162),T=n(163),C=n(161),E=n(169),N=n(156),M=Object(N.a)({media:{height:0,paddingTop:"56.25%",backgroundColor:"rgba(0, 0, 0, 0.5)",backgroundBlendMode:"darken",margin:"10px"},border:{border:"solid"},fullHeightCard:{height:"100%"},card:{display:"flex",flexDirection:"column",justifyContent:"space-between",borderRadius:"15px",height:"100%",position:"relative",mx:"200px",width:"75%",padding:"20px"},overlay:{position:"absolute",top:"20px",left:"20px",color:"white"},overlay2:{position:"absolute",top:"20px",right:"20px",color:"white"},grid:{display:"flex"},details:{display:"flex",justifyContent:"space-between",margin:"20px"},title:{padding:"0 16px"},cardActions:{padding:"0 16px 8px 16px",display:"flex",justifyContent:"space-between"}}),A=n(3),P=function(e){var t=e.post,n=M(),o=null===t||void 0===t?void 0:t.post_id;return console.log(t),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(y.a,{className:n,children:[Object(A.jsx)(C.a,{avatar:Object(A.jsx)(E.a,{"aria-label":"recipe",className:n.avatar,src:null===t||void 0===t?void 0:t.user_image}),title:null===t||void 0===t?void 0:t.name}),Object(A.jsx)("div",{className:"post__header"}),Object(A.jsx)(w.a,{variant:"h4",component:"h4",children:null===t||void 0===t?void 0:t.title}),""!==(null===t||void 0===t?void 0:t.image_link)?Object(A.jsx)(k.a,{className:n.media,image:null===t||void 0===t?void 0:t.image_link,title:null===t||void 0===t?void 0:t.Title}):Object(A.jsx)(k.a,{title:null===t||void 0===t?void 0:t.Title}),Object(A.jsx)("h4",{children:null===t||void 0===t?void 0:t.caption}),Object(A.jsx)("h3",{children:null===t||void 0===t?void 0:t.timePosted}),Object(A.jsxs)(T.a,{children:[Object(A.jsxs)(_.a,{size:"small",color:"primary",onClick:function(){localStorage.setItem("post_id",{postid:o}),window.location.assign("/".concat(o,"/comments"))},children:[null===t||void 0===t?void 0:t.noofcomments," Comments"]}),Object(A.jsx)("form",{})]})]})})},S=(n(165),n(118),n(76)),R=n(168),D=function(e){var t,n,c=Object(g.c)((function(e){var t;return null===(t=e.User)||void 0===t?void 0:t.Name}));console.log(null===(t=e.post)||void 0===t?void 0:t.post_id,"adding comments");var a=null===(n=e.post)||void 0===n?void 0:n.post_id,r=e.up_level_cid;console.log(r);var i=Object(g.b)(),s=Object(o.useState)(""),l=Object(S.a)(s,2),p=l[0],m=l[1],v=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),i(b(a,p)),i(h(a)),m("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j="Comment as "+c;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(R.a,{id:"outlined-multiline-static",margin:"normal",label:j,multiline:!0,rows:4,variant:"outlined",size:"medium",fullWidth:!0,onChange:function(e){var t=e.target.value;m(t)},value:p}),Object(A.jsx)(_.a,{variant:"contained",color:"primary",onClick:v,children:"Comment"})]})},L=n(124),U=n(167),z=n(52),F=n.n(z),G=n(53),V=n.n(G),H=(n(119),function(e){var t,n,o,c,a,r,i=null===(t=e.comment)||void 0===t?void 0:t.comment_id,l=null===(n=e.comment)||void 0===n?void 0:n.post_id,d=Object(g.b)(),u=Object(g.c)((function(e){return console.log("h",e),e.Comments})),p=(Object(g.c)((function(e){return console.log("h",e.Thread),e.Thread})),u.find((function(e){return e.comment_id===i})));console.log("iiiiiii");var m="default",v="default";return"u"===p.upordown?(m="primary",v="default"):"d"===p.upordown&&(v="secondary",m="default"),Object(A.jsxs)(L.a,{style:{padding:"10px 5px",marginTop:10,spacing:3},children:[Object(A.jsxs)(s.a,{id:"comment-grid",container:!0,wrap:"nowrap",spacing:2,children:[Object(A.jsx)(s.a,{item:!0,children:Object(A.jsx)(E.a,{alt:"Remy Sharp",src:null===e||void 0===e||null===(o=e.comment)||void 0===o?void 0:o.user_image})}),Object(A.jsxs)(s.a,{justifyContent:"left",item:!0,xs:!0,zeroMinWidth:!0,children:[Object(A.jsx)("h4",{style:{margin:0,textAlign:"left"},children:null===(c=e.comment)||void 0===c?void 0:c.name}),Object(A.jsx)("p",{style:{textAlign:"left",color:"gray"},children:null===(a=e.comment)||void 0===a?void 0:a.timeCommented}),Object(A.jsx)("p",{style:{textAlign:"left"},children:null===e||void 0===e||null===(r=e.comment)||void 0===r?void 0:r.comment}),Object(A.jsx)(U.a,{className:"post__header__upvote",onClick:function(){var t,n;d(x(null===(t=e.comment)||void 0===t?void 0:t.comment_id,"u")),d(h(l)),d(O(null===(n=e.comment)||void 0===n?void 0:n.comment_id))},children:Object(A.jsx)(F.a,{color:m})}),p.upVotes-p.downVotes,Object(A.jsx)(U.a,{className:"post__header__downvote",onClick:function(){var t;d(x(null===(t=e.comment)||void 0===t?void 0:t.comment_id,"d")),d(h(l)),d(O(i)),console.log("downvote")},children:Object(A.jsx)(V.a,{color:v})})]})]}),Object(A.jsx)(_.a,{size:"small",color:"black",onClick:function(){var t,n;localStorage.setItem("post_id",null===(t=e.comment)||void 0===t?void 0:t.post_id),d(O(i)),window.location.assign("/comments/".concat(null===(n=e.comment)||void 0===n?void 0:n.comment_id,"/thread"))},children:"View Thread"})]})}),I=function(){var e=Object(g.b)(),t=null,n=[],c=Object(g.c)((function(e){return e.Comments}));Object(o.useEffect)((function(){e(h(4))}),[e,4]);for(var a=Object(g.c)((function(e){return e.Posts})),r=0;r<a.length;r++){var i;4==(null===(i=a[r])||void 0===i?void 0:i.post_id)&&(t=a[r])}for(var l=0;l<c.length;l++){var d;4==(null===(d=c[l])||void 0===d?void 0:d.post_id)&&n.push(c[l])}return n.sort((function(e,t){return(null===e||void 0===e?void 0:e.timePosted)>(null===t||void 0===t?void 0:t.timePosted)?-1:1})),Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{style:{padding:50},className:"App",children:[Object(A.jsx)(s.a,{container:!0,spacing:3,children:Object(A.jsxs)(s.a,{item:!0,xs:9,children:[Object(A.jsx)(P,{post:t}),Object(A.jsx)(D,{post:t})]})}),n.map((function(e,t){return Object(A.jsx)(s.a,{item:!0,xs:9,sm:6,children:Object(A.jsx)(H,{comment:e})},t)}))]})})};var W=function(){return Object(A.jsx)("div",{children:Object(A.jsx)("h1",{children:"Your are not logged in"})})},B=n.p+"static/media/logo.7c0ee393.png",J=function(){var e=Object(g.b)();return Object(o.useEffect)((function(){e(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get("/posts");case 3:n=e.sent,o=n.data,t({type:"FETCH_ALL",payload:o}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.get("/users");case 3:n=e.sent,o=n.data,t({type:"GET_USER",payload:o}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),console.log("Dispatching")}),[e]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"app__header",children:Object(A.jsxs)("a",{href:"https://skinder-5d70f.web.app/",children:[" ",Object(A.jsx)("img",{className:"app__headerImage",src:B,alt:"Logo"})]})}),Object(A.jsx)("div",{className:"app",children:i.a.get("access_control_token_cookie_skinder")?Object(A.jsx)(I,{}):Object(A.jsx)(W,{})})]})},Y=n(21),q=n(75),K=n(48),Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return[].concat(Object(K.a)(e),[t.payload]);case"FETCH_ALL":return t.payload;default:return e}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_POST_COMMENTS":return t.payload;case"CREATE":return[].concat(Object(K.a)(e),[t.payload]);case"UPVOTE_COMMENT":case"DOWNVOTE_COMMENT":default:return e}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_THREAD":return t.payload;case"REPLY_COMMENT":default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER":return t.payload;default:return e}},ee=Object(Y.c)({Posts:Q,Comments:X,Thread:Z,User:$}),te=Object(Y.e)(ee,Object(Y.d)(Object(Y.a)(q.a)));a.a.render(Object(A.jsx)(g.a,{store:te,children:Object(A.jsx)(J,{})}),document.getElementById("root"))},91:function(e,t,n){},92:function(e,t,n){}},[[122,1,2]]]);
//# sourceMappingURL=main.e196c7ba.chunk.js.map